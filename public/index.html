<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kik Messenger</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Экран входа -->
    <div id="login-screen" class="screen active">
        <div class="login-container">
            <h1>Kik Messenger</h1>
            <form id="login-form">
                <div class="form-group">
                    <label for="username">Name</label>
                    <input type="text" id="username" required placeholder="Enter your name">
                </div>
                <div class="form-group">
                    <label for="nickname">Username:</label>
                    <input type="text" id="nickname" required placeholder="Enter your username">
                </div>
                <div class="form-group">
                    <label for="room-id">ID room (leave empty to create a new one):</label>
                    <input type="text" id="room-id" placeholder="Enter room ID">
                </div>
                <button type="submit" class="btn-primary">
                    <!-- Login SVG Icon -->
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="vertical-align:middle;margin-right:8px;">
                        <path d="M9 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M16 17L21 12L16 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M21 12H9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Enter chat
                </button>
            </form>
        </div>
    </div>

    <!-- Основной экран чата -->
    <div id="chat-screen" class="screen">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h2>Kik Messenger</h2>
                <button id="settings-btn" title="Settings" class="icon-btn">
                    <!-- Settings SVG Icon -->
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M19.4 15C19.2662 15.3052 19.1991 15.6369 19.2037 15.9716C19.2083 16.3063 19.2845 16.6358 19.4266 16.9366C19.5687 17.2374 19.7733 17.502 20.0256 17.7114C20.2779 17.9208 20.5714 18.0698 20.885 18.1476L21.4 18.2676C21.6392 18.3196 21.8614 18.4283 22.0477 18.5842C22.2341 18.7401 22.3792 18.9386 22.4707 19.1626C22.5622 19.3866 22.5974 19.6293 22.5734 19.8696C22.5494 20.1099 22.4669 20.3407 22.3333 20.5426L21.3333 22.0001C21.1899 22.2083 20.9951 22.3753 20.7677 22.4852C20.5403 22.5951 20.288 22.6442 20.0353 22.6279C19.7826 22.6116 19.5381 22.5305 19.3267 22.3926C19.1152 22.2546 18.9441 22.0646 18.83 21.8426L18.3333 20.8676C18.2235 20.6637 18.063 20.4915 17.8673 20.3675C17.6716 20.2435 17.4474 20.1721 17.2167 20.1601C16.8828 20.1435 16.5532 20.0651 16.2467 19.9286C15.9401 19.7921 15.662 19.6001 15.4267 19.3626C15.1913 19.1251 15.0027 18.8461 14.8701 18.5398C14.7375 18.2335 14.6634 17.9054 14.6517 17.5726V16.6676C14.6517 16.4044 14.5473 16.1523 14.3617 15.9666C14.176 15.781 13.9239 15.6766 13.6607 15.6766H12.3333C12.0701 15.6766 11.818 15.781 11.6323 15.9666C11.4467 16.1523 11.3423 16.4044 11.3423 16.6676V17.5726C11.3306 17.9054 11.2565 18.2335 11.1239 18.5398C10.9913 18.8461 10.8027 19.1251 10.5673 19.3626C10.332 19.6001 10.0539 19.7921 9.74734 19.9286C9.44078 20.0651 9.11121 20.1435 8.77734 20.1601C8.54661 20.1721 8.32241 20.2435 8.12671 20.3675C7.93101 20.4915 7.77052 20.6637 7.66067 20.8676L7.16334 21.8426C7.04928 22.0646 6.87816 22.2546 6.66671 22.3926C6.45526 22.5305 6.21078 22.6116 5.95808 22.6279C5.70538 22.6442 5.45306 22.5951 5.22566 22.4852C4.99826 22.3753 4.80348 22.2083 4.66001 22.0001L3.66001 20.5426C3.52642 20.3407 3.44392 20.1099 3.41992 19.8696C3.39592 19.6293 3.43112 19.3866 3.52262 19.1626C3.61412 18.9386 3.75923 18.7401 3.94559 18.5842C4.13194 18.4283 4.35416 18.3196 4.59334 18.2676L5.10834 18.1476C5.42197 18.0698 5.71544 17.9208 5.96774 17.7114C6.22004 17.502 6.42466 17.2374 6.56675 16.9366C6.70884 16.6358 6.78504 16.3063 6.78964 15.9716C6.79424 15.6369 6.72715 15.3052 6.59334 15C6.45952 14.6948 6.45492 14.3631 6.58001 14.0626L6.79334 13.5626C6.90319 13.3587 7.06368 13.1865 7.25938 13.0625C7.45508 12.9385 7.67928 12.8671 7.91001 12.8551C8.24388 12.8385 8.57345 12.7601 8.88001 12.6236C9.18657 12.4871 9.46466 12.2951 9.70001 12.0576C9.93535 11.8201 10.1239 11.5411 10.2565 11.2348C10.3891 10.9285 10.4632 10.6004 10.4749 10.2676V9.36258C10.4749 9.09936 10.5793 8.84731 10.7649 8.66165C10.9506 8.47599 11.2026 8.37158 11.4659 8.37158H12.7923C13.0555 8.37158 13.3075 8.47599 13.4932 8.66165C13.6789 8.84731 13.7833 9.09936 13.7833 9.36258V10.2676C13.795 10.6004 13.8691 10.9285 14.0017 11.2348C14.1343 11.5411 14.3229 11.8201 14.5583 12.0576C14.7936 12.2951 15.0717 12.4871 15.3783 12.6236C15.6848 12.7601 16.0144 12.8385 16.3483 12.8551C16.579 12.8671 16.8032 12.9385 16.9989 13.0625C17.1946 13.1865 17.3551 13.3587 17.4649 13.5626L17.6783 14.0626C17.8034 14.3631 17.7988 14.6948 17.665 15Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
            
            <div class="room-info">
                <div class="room-id">Room: <span id="current-room-id">-</span></div>
                <div class="user-count">Users: <span id="user-count">0</span></div>
            </div>

            <div class="users-list">
                <h3>Users</h3>
                <ul id="users-list"></ul>
            </div>

            <!-- Настройки -->
            <div id="settings-panel" class="settings-panel hidden">
                <h3>Settings</h3>
                <div class="setting-group">
                    <label for="theme-select">Theme:</label>
                    <select id="theme-select">
                        <option value="dark">Dark</option>
                        <option value="monokai">Monokai</option>
                        <option value="nordwind">Nordwind</option>
                    </select>
                </div>
                <div class="setting-group">
                    <label for="font-size">Font size:</label>
                    <select id="font-size">
                        <option value="small">Small</option>
                        <option value="medium" selected>Medium</option>
                        <option value="large">Large</option>
                    </select>
                </div>
                <button id="logout-btn" class="btn-secondary">
                    <!-- Logout SVG Icon -->
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="vertical-align:middle;margin-right:8px;">
                        <path d="M9 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M16 17L21 12L16 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M21 12H9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Logout
                </button>
            </div>
        </div>

        <!-- Основная область чата -->
        <div class="chat-main">
            <div class="chat-header">
                <h3>Chat</h3>
                <div class="call-controls">
                    <!-- Call Button -->
                    <button id="call-btn" title="Start Call" class="icon-btn">
                        <!-- Phone SVG Icon -->
                        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M22 16.92V19.92C22 20.4452 21.7893 20.9495 21.4142 21.3246C21.0391 21.6996 20.5348 21.9103 20.0096 21.9103C15.6293 21.9103 11.4261 20.327 8.22286 17.5147C5.01959 14.7024 2.99998 10.9705 2.99998 6.09029C2.99998 5.56506 3.21069 5.06075 3.58577 4.68568C3.96084 4.3106 4.46515 4.09989 4.99038 4.09989H7.99038C8.36138 4.09872 8.71967 4.23681 8.99238 4.48529C9.26509 4.73377 9.43138 5.07382 9.45768 5.43989C9.51818 6.31069 9.69848 7.16929 9.99238 7.98989C10.099 8.28312 10.1143 8.60165 10.0364 8.90411C9.95844 9.20657 9.79095 9.47897 9.55568 9.68529L8.35568 10.7853C9.49998 13.0806 11.1637 14.9975 13.1637 16.3453L14.2637 15.2453C14.47 15.01 14.7424 14.8425 15.0449 14.7645C15.3473 14.6866 15.6658 14.7019 15.959 14.8086C16.7796 15.1025 17.6382 15.2828 18.509 15.3433C18.8751 15.3696 19.2151 15.5359 19.4636 15.8086C19.7121 16.0813 19.8502 16.4396 19.849 16.8106V16.92" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                    <!-- End Call Button -->
                    <button id="end-call-btn" title="End Call" class="icon-btn">
                        <!-- Phone Off SVG Icon -->
                        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M10.68 13.31L16.31 7.68M21.52 2.48L16.89 7.11M16.89 7.11L20.03 4.19C20.4051 3.81593 20.6158 3.31162 20.6158 2.78639C20.6158 2.26116 20.4051 1.75685 20.03 1.38178C19.655 1.00671 19.1506 0.796 18.6254 0.796C18.1002 0.796 17.5959 1.00671 17.2208 1.38178L14.08 4.5M16.89 7.11L14.08 4.5M14.08 4.5L8.45 10.13M22 16.92V19.92C22.0001 20.1985 21.9325 20.4727 21.8033 20.7193C21.6741 20.9659 21.4872 21.1774 21.2592 21.3353C21.0312 21.4932 20.7692 21.5928 20.496 21.6257C20.2228 21.6586 19.9467 21.6238 19.69 21.524C15.5993 20.024 11.976 17.4007 10.476 13.31C10.3762 13.0533 10.3414 12.7772 10.3743 12.504C10.4072 12.2308 10.5068 11.9688 10.6647 11.7408C10.8226 11.5128 11.0341 11.3259 11.2807 11.1967C11.5273 11.0675 11.8015 10.9999 12.08 11H15.08C15.451 10.9988 15.8093 11.1369 16.082 11.3854C16.3547 11.6339 16.521 11.9739 16.5473 12.34C16.6078 13.2108 16.7881 14.0694 17.082 14.89C17.1887 15.1832 17.204 15.5018 17.126 15.8042C17.0481 16.1067 16.8806 16.3791 16.6453 16.5854L14.08 19.15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Область сообщений -->
            <div class="messages-container">
                <div id="messages-list" class="messages-list"></div>
            </div>

            <!-- Форма отправки сообщений -->
            <div class="message-input-container">
                <form id="message-form">
                    <input type="text" id="message-input" placeholder="Enter message..." required>
                    <button type="submit" class="btn-send">
                        <!-- Send SVG Icon -->
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="vertical-align:middle;margin-right:8px;">
                            <path d="M22 2L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M22 2L15 22L11 13L2 9L22 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Send
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Модальное окно входящего звонка -->
    <div id="incoming-call-modal" class="modal hidden">
        <div class="modal-content">
            <h3>Incoming call from <span id="caller-name">-</span></h3>
            <div class="call-buttons">
                <button id="accept-call-btn" class="btn-accept">
                    <!-- Accept Call SVG Icon -->
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="vertical-align:middle;margin-right:8px;">
                        <path d="M22 16.92V19.92C22 20.4452 21.7893 20.9495 21.4142 21.3246C21.0391 21.6996 20.5348 21.9103 20.0096 21.9103C15.6293 21.9103 11.4261 20.327 8.22286 17.5147C5.01959 14.7024 2.99998 10.9705 2.99998 6.09029C2.99998 5.56506 3.21069 5.06075 3.58577 4.68568C3.96084 4.3106 4.46515 4.09989 4.99038 4.09989H7.99038C8.36138 4.09872 8.71967 4.23681 8.99238 4.48529C9.26509 4.73377 9.43138 5.07382 9.45768 5.43989C9.51818 6.31069 9.69848 7.16929 9.99238 7.98989C10.099 8.28312 10.1143 8.60165 10.0364 8.90411C9.95844 9.20657 9.79095 9.47897 9.55568 9.68529L8.35568 10.7853C9.49998 13.0806 11.1637 14.9975 13.1637 16.3453L14.2637 15.2453C14.47 15.01 14.7424 14.8425 15.0449 14.7645C15.3473 14.6866 15.6658 14.7019 15.959 14.8086C16.7796 15.1025 17.6382 15.2828 18.509 15.3433C18.8751 15.3696 19.2151 15.5359 19.4636 15.8086C19.7121 16.0813 19.8502 16.4396 19.849 16.8106V16.92" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Accept
                </button>
                <button id="reject-call-btn" class="btn-reject">
                    <!-- Reject Call SVG Icon -->
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="vertical-align:middle;margin-right:8px;">
                        <path d="M10.68 13.31L16.31 7.68M21.52 2.48L16.89 7.11M16.89 7.11L20.03 4.19C20.4051 3.81593 20.6158 3.31162 20.6158 2.78639C20.6158 2.26116 20.4051 1.75685 20.03 1.38178C19.655 1.00671 19.1506 0.796 18.6254 0.796C18.1002 0.796 17.5959 1.00671 17.2208 1.38178L14.08 4.5M16.89 7.11L14.08 4.5M14.08 4.5L8.45 10.13M22 16.92V19.92C22.0001 20.1985 21.9325 20.4727 21.8033 20.7193C21.6741 20.9659 21.4872 21.1774 21.2592 21.3353C21.0312 21.4932 20.7692 21.5928 20.496 21.6257C20.2228 21.6586 19.9467 21.6238 19.69 21.524C15.5993 20.024 11.976 17.4007 10.476 13.31C10.3762 13.0533 10.3414 12.7772 10.3743 12.504C10.4072 12.2308 10.5068 11.9688 10.6647 11.7408C10.8226 11.5128 11.0341 11.3259 11.2807 11.1967C11.5273 11.0675 11.8015 10.9999 12.08 11H15.08C15.451 10.9988 15.8093 11.1369 16.082 11.3854C16.3547 11.6339 16.521 11.9739 16.5473 12.34C16.6078 13.2108 16.7881 14.0694 17.082 14.89C17.1887 15.1832 17.204 15.5018 17.126 15.8042C17.0481 16.1067 16.8806 16.3791 16.6453 16.5854L14.08 19.15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Reject
                </button>
            </div>
        </div>
    </div>

    <!-- Видео контейнер -->
    <div id="video-container" class="video-container hidden">
        <div class="video-grid">
            <video id="local-video" autoplay muted></video>
            <video id="remote-video" autoplay></video>
        </div>
        <button id="close-video-btn" class="btn-close-video" title="Close Video">
            <!-- Close SVG Icon -->
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        </button>
    </div>

    <!-- Подключение скриптов -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
</body>
</html>