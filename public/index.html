<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kik Messenger</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Экран входа -->
    <div id="login-screen" class="screen active">
        <div class="login-container">
            <h1>Kik Messenger</h1>
            <form id="login-form">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" required placeholder="@username" maxlength="13" pattern="@[a-zA-Z0-9]{1,12}" title="Username must start with @ and contain only English letters and numbers (max 12 characters after @)">
                </div>
                <div class="form-group">
                    <label for="nickname">Nickname</label>
                    <input type="text" id="nickname" required placeholder="Nickname" maxlength="12" pattern="[a-zA-Z0-9]{1,12}" title="Nickname can only contain English letters and numbers (max 12 characters)">
                </div>
                <div class="form-group">
                    <label for="room-id">ID room (leave empty to create a new one):</label>
                    <input type="text" id="room-id" placeholder="Enter room ID">
                </div>
                <button type="submit" class="btn-primary">
                    <!-- Login SVG Icon (User with arrow) -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" style="vertical-align:middle;margin-right:6px;" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12h7m0 0l-3-3m3 3l-3 3m-6-9a4 4 0 110 8 4 4 0 010-8zm0 8a9 9 0 00-9 9"/></svg>
                    Enter chat
                </button>
            </form>
        </div>
    </div>

    <!-- Основной экран чата -->
    <div id="chat-screen" class="screen">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="room-info">
                <div class="room-id">Room: <span id="current-room-id">-</span></div>
            </div>

            <div class="users-list">
                <h3>Users</h3>
                <ul id="users-list"></ul>
            </div>

            <!-- Настройки - перемещено вниз сайдбара -->
            <div class="sidebar-settings">
                <button id="logout-btn" class="btn-secondary">
                    <!-- Logout SVG Icon (Logout arrow left) -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" style="vertical-align:middle;margin-right:6px;" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a2 2 0 01-2 2H7a2 2 0 01-2-2V7a2 2 0 012-2h4a2 2 0 012 2v1"/></svg>
                    Logout
                </button>
            </div>
        </div>
        <!-- Основная область чата -->
        <div class="chat-main">
            <div class="chat-header">
                <h3>Chat</h3>
                <div class="call-controls">
                    <button id="call-btn" title="Start Call" class="btn-call" style="background-color: #28a745; border-radius: 50%; width: 50px; height: 50px; display: flex; align-items: center; justify-content: center; border: none; padding: 0;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
                        </svg>
                    </button>
                    <button id="share-btn" title="Share Room" class="btn-share" style="border-radius: 50%; width: 50px; height: 50px; display: flex; align-items: center; justify-content: center;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="18" cy="5" r="3"/>
                            <circle cx="6" cy="12" r="3"/>
                            <circle cx="18" cy="19" r="3"/>
                            <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/>
                            <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Область сообщений -->
            <div class="messages-container">
                <div id="messages-list" class="messages-list"></div>
            </div>

            <!-- Форма отправки сообщений -->
            <div class="message-input-container">
                <form id="message-form">
                    <input type="text" id="message-input" placeholder="Enter message..." required>
                    <button type="submit" class="btn-send">
                        <!-- Send SVG Icon -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" style="vertical-align:middle;margin-right:6px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="22" y1="2" x2="11" y2="13"/>
                            <polygon points="22 2 15 22 11 13 2 9 22 2"/>
                        </svg>
                        Send
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Call UI Modal Window: Accept or Decline Call -->
    <div id="incoming-call-modal" class="modal hidden">
        <div class="modal-content">
            <h3>Incoming call</h3>
            <p><span id="caller-name">-</span> is calling you...</p>
            <div class="call-buttons">
                <button id="accept-call-btn" class="btn-accept" style="margin-right:8px;">
                    <!-- Phone SVG Icon (Accept Call, green) -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" style="vertical-align:middle;margin-right:4px;" fill="none" viewBox="0 0 24 24" stroke="green">
                        <path stroke="green" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            d="M15.05 5A5.978 5.978 0 016 15.05l2.2 2.2a1.92 1.92 0 002.7-.15l1.18-1.18a2.02 2.02 0 012.5-.23 11.72 11.72 0 004.86 4.86c.77.42 2-.06 2.23-.89l1.18-1.18a1.92 1.92 0 00-.15-2.7l-2.2-2.2A5.978 5.978 0 0115.05 5z"/>
                    </svg>
                    Accept
                </button>
                <button id="decline-call-btn" class="btn-reject">
                    <!-- Phone Off SVG Icon (Reject Call, red) -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" style="vertical-align:middle;margin-right:4px;" fill="none" viewBox="0 0 24 24" stroke="red">
                        <path stroke="red" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            d="M3 3l18 18M22 16.92V21a2 2 0 01-2.18 2A19.22 19.22 0 013 5.18 2 2 0 015 3h4.09a2 2 0 012 2.18c-.02.6.47 1.09 1.07 1.09C13.01 6.26 16 9.17 16 13.01c0 .6.49 1.09 1.09 1.09.52 0 .91.41.91.91z"/>
                    </svg>
                    Decline
                </button>
            </div>
        </div>
    </div>

    <!-- Видео контейнер -->
    <div id="video-container" class="video-container hidden">
        <div class="video-grid">
            <video id="local-video" autoplay muted></video>
            <video id="remote-video" autoplay></video>
        </div>
        <button id="close-video-btn" class="btn-close-video" title="Close Video">
            <!-- Close SVG Icon (X) -->
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" style="vertical-align:middle;" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <line x1="18" y1="6" x2="6" y2="18" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <line x1="6" y1="6" x2="18" y2="18" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        </button>
    </div>

    <!-- Toast контейнер для уведомлений -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Подключение скриптов -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
</body>
</html>
